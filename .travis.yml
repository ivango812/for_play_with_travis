dist: trusty
sudo: required
language: python 
  - '3.7.4'
env:
  matrix:
  - GCE_CREDENTIALS_FILE="$(pwd)/credentials.json"
  global:
  - secure: AfjE2fBjF5PMwdoE4opq6hDIlLxI+ACmPkWz5HdR+q/Hl1D4ip5OIttkrdfBMwvo1xkNItBoXNlNf5y7+iQ2fgu0oxd7lgAXSIfamHrhoHSetEEmGXvKS4z7aC8PrVot9WytDJ9TMPBA7XNZiN3vPwJkI5A6bSF7IddeP5xC7LhTofrj1fMwv4DurcE3B7OJrMpPPWApQoSxVp/IR6oYJQVudHtS+/LlZKnqfXpOYpVWXJs3Ye4oZIbdFTG+nc7seQPPmxYTFO+unI+fVYXqDvQcMzF0AehLUJuAXo21UikbWd4BSQYfX2nTd1LbubmL9lQfyxVnBDMpe0OEjS51b9szkTA7+NORH+LZpKwEcfMkkjkTUMOkmO7iQBYd27KdTByqPJ+e9+7QkHU2FDPynciCVFM2mIcJ46SO3sW9ymGVlnWELq69BKBn0KkHheED1Ofh6Imsn7i8P7DNF923W9o+gwKRhwKBXBKoV9yEOe0QlmEzUnJX0QAwkVae+FGmUmEO7H5rvp6t1yuDcg77DaEvd9WPLHlRLIUQvewP6SY4LT42kKBgQCb/qUVB0fCIuWlTfKhTX49AjLDKSXzpvjn6jTFy6wmK9hrsWIhKnv4wmfwFaHLl3EnFXWZYuCvzn79CCVnr6ZsR2nY+90IBVVsj4tWW8i9jdu5zTsJoqbU=
  - secure: RdcVQbtN8LWUPD49s/PDVLxlzkGWPkM0a/mT2OIdXYSxn7CtygzmIf8TDLqIMaGVsgpWZspEFqEdiR9RhWAwcEPNSpn4SUAXsxcolRv+jsCYFHLZ4rNeE8S3IfjiCNHRwRvXs9lxLz1lETzqEX9NAnWK804/H5ieC9nuZygdIw8vdH2PRxMs6e5Aq/XSX0YomNtOT3vNtMX3hjFg0ofQfezHhYT6kcIOKdwIOkUJ5gL+nuBHM0ftE0mNLU7N71XkzcjnETLcyj7j5R7obK6a1TPrKm3B+Qqq/3wB4l3JpYdg+ntVpdv3rL45NzyDb6+jWzOE/rJiP6GoOU5zyfKMSUEOFez7bhl97aG4ZLY3jfGl7F2ZlmgO/gROEYnZMhXTMRzGqLcOnvP+ZpDHNO/J+8e7HHFfVEfjVCpCVHlhSY/bw/dkJFmaZ6WozUyR1WHsbq7RvcaVu1jPindRHZgXfRYiABn3VdEeLEz5JYfks/uWRyHzFWMZZY+UQ3qIZzLkOmL2cTOGdF2i/UR2ct+EtAFIncwIp0ytkqEcULKNUtff7Fd+6lcffdLUGbdUiVrKe5a5r7rzWOteeanNZKw451ZHhpKyX7dwNs7LX1/0x4RXQi15kGkrkTqbvI4iPEiWxNnnGT5kLYK8tlG+2Lgo7uUhOG/PiD1acwUFovRSMBw=
  - secure: FnjA3JWX7GjrVsGPiGSIGjYfCgQy4BPbffTu2hYDCde38TXfkrpW+5dkkQrqwIHm4526BEo09TpUyg7rc8UQ8R/E4IN8zY4krsl0PFBZvfys991L/osrESef6VfiMRKEiTPhgfZxFy3jAcxAaEkgZhBfM8p3G3AK+0VCrS6zu/fo0BRQe5h/Eyi+HX12UYSPJPfM8yHRvJzoAtHLzp4DRysbYHHvm9E+QqdyVsZlIyvQBWMMgfs4MqlyeD2N1X9FFM1VdSs9lKTphQi4k9duH9Fep3+DPZoNmy24f0aorIYHnOKCbFtlp1DdmoNI5USo8CUi5NF2bhYFZgDRiLFF3rZsSAzaLO92yZzdqWVmKcQE4S4us2ecc/QWNs3aNbq7GOSCN9XEiItul+iAH3nOBD1NyN5F96uGbCXU3Bky8JCpJJqEp1/JAJnVhv28Bhu7dGdIQc2KS9uGcEo3cGgYpdvVKTmPQK4UQvRxwYnTKrnnda+PBFuw3uMwGI006aonEFsQuhsn8Pylere3brbOv0gqT1rugDrBY26L5YdW21erR/KxqwwIO0Rh6IYCMWRnoTRGwZkj0JDaoJRWaswnMn1QjwtMj3xjODd1etyGfL8LVwbXLQL8e5KdUr7E/EiW5b78fY/N40o433CTkiRN6uIXzVZr1DkW4DRimrKA+NI=
  - secure: WBtetUafj/SGmMuQ4+5f5B5Ot0jVbBn1FvJj1SNeyB8rEnJuaoxwArUyqtD/Q2Jc2YY62DFCIoE7C9lBX67OII2r6WaYIYLc7eO851kuEW0Ym5WzUHjnOHoOCsvoli+eu4YBtDldP0MFRtj1iRPeC0KcBQYlUck3PYJNieHxVT7nyXkWdHYAZ9vxmcoe1PeKqCV8ZEpCp8UibZZRCqLD2TCWvH+dO9jnK2tRyCZPPslS/hP5GnNZuCjaORUHIgwaS6tYn2Gt/wO0pEXeP9l3fT4AHXc1bgwoexTarQza1UmZT7dyWLc3u4lZzzqxH2xQSRcrceFWLj6nV/f4OEvnRufYS1RI/ivXPzkYAuh1XHQwg+MYv3BtIMegbm8pDIRUCf70nDHiT1nl6gWG9xLervWKL9k8B7p8OLNQJfHmW6RL4zUjnyvQhUK8hQUs886n4F/Q3UtJxeLjVZxzGeDb3A1BN3ZkYQlZO3VCGfGksXv09IH6ex2WS0ajem0Huj6+lVmVLV3Zcv/30OKRaGI5t5pBv21mbSAjgQeYl+zawk9BurO5IBHvJso6TxCN8MeF14XfnDcMVJFC8QFC3xdPQMRNCKFiX7RPqsElJ/KBzp8Z7x08gJtslzNRCDnt970HIKFYk0xCtcBTh4xVXFuuqCHwjOrEjtPuN3e2etcZFqk=
before_install:
- openssl aes-256-cbc -K $encrypted_7ab03ff840c1_key -iv $encrypted_7ab03ff840c1_iv
  -in secrets.tar.enc -out secrets.tar -d
- tar xvf secrets.tar
- mv google_compute_engine /home/travis/.ssh/
- chmod 0600 /home/travis/.ssh/google_compute_engine
install:
- |
  # pip install ansible, molecule & apache-libcloud
  pip install --user ansible==2.8.6 molecule[gce] apache-libcloud
script:
- molecule --debug test
after_script:
- molecule --debug destroy
notifications:
  slack:
    rooms:
      secure: DgVKZz1y+7Ze3qdmX82oRIoITjypoCA8n9QIq8V5wqkzTRQRBXGsWasqV+VrqpdeqrA5QVnEtcmNHqt6HrmKei5wtd/FJqYMiiUQhpmhjqVASfZ667tiNZqmj9OOpf94htzEKgY/JfslFXfLEogUMJa+dzsoXZCBKuBFWHN16uKpviQ1/bAJhKHwO2cTz+nsTCUv11EyGUv9U/on/wQ8ySTbiWFK9Z3y00OqzhByq/9zuwoxcZgW7acxehtyHYALiYAxvx2kQv4Dv4dra6ng0m7bObiwCU07R3KgKfdoxL1RZwWZmvzLLmxmtBqJ0uZ9+NCLh3FbhKppBa4g3wZyxrvklsQ2TXvziDfqcHbz7s1+FzWHb74keiRO/5GOjt0olcv80/k1Ma4oBW0AgMzZ4AqGcFMLE9Dg3bh4EBd3mUQ1YVc+a0qx3e9MhCq0sBnjUZbJtH08Z/wyTywXyTZNPWdhyZUNJS89C5btw2zDdnFSD+8nrYoji4XckZgoYT3sgadXzAteJ70DyU7TejG1ieKPCcapJi41myeL+Gyp8CFZxZJNIvMtWU177dZeCS6j7HTYTz/b9obTkIuLJ/RIrGZR25oYbiz1QsRCmJMj1uCAeT1Jfh5HgsQmInzS3q0MGiJrOO+aivttMXD9+I4633KXnIDKB+qUb6koXDIRhXI=
